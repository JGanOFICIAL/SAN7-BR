<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mais Curtidas</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #0a0a1f, #1c0035);
      color: white;
      font-family: 'Segoe UI', sans-serif;
    }

    header {
      padding: 20px;
      background: #1b005f;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: white;
      box-shadow: 0 2px 8px #000;
    }

    .search {
      text-align: center;
      margin: 20px 0;
    }

    .search input {
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 30px;
      border: none;
      outline: none;
      width: 280px;
      max-width: 80%;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: auto;
    }

    .card {
      background: #1a1a3a;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 12px #0005;
      text-align: center;
      position: relative;
      animation: fadeIn 0.6s ease;
    }

    .card img.foto {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #fff;
    }

    .medalha {
      width: 30px;
      position: absolute;
      top: 10px;
      right: 10px;
    }

    .curtir-btn {
      margin-top: 10px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .curtir-btn img {
      width: 24px;
    }

    .curtidas {
      margin-top: 6px;
      font-weight: bold;
      font-size: 14px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #loader-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    #loader {
      width: 30px;
      height: 30px;
      border: 4px solid transparent;
      border-top-color: #e74c3c;
      border-right-color: #f1c40f;
      border-bottom-color: #2ecc71;
      border-left-color: #3498db;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      box-shadow: 0 0 8px rgba(52,152,219,0.7), 0 0 12px rgba(231,76,60,0.7);
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .sem-resultado {
      text-align: center;
      color: #ccc;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <header>



<!-- MENU LATERAL MODERNO -->
<style>
  /* Ícone de menu */
  .menu-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 35px;
    height: 30px;
    cursor: pointer;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .menu-toggle span {
    height: 4px;
    background: #fff;
    border-radius: 2px;
    transition: 0.4s;
  }

  .menu-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }

  .menu-toggle.active span:nth-child(2) {
    opacity: 0;
  }

  .menu-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
  }

  /* Menu lateral */
  .side-menu {
    position: fixed;
    top: -100%;
    right: 0;
    width: 100%;
    background: linear-gradient(to bottom, #1e1e3f, #4b0082);
    transition: top 0.5s ease;
    padding: 60px 20px 20px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
    z-index: 9998;
    text-align: center;
  }

  .side-menu.active {
    top: 0;
  }

  .side-menu a {
    display: block;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 12px;
    margin: 10px 0;
    color: #fff;
    font-weight: bold;
    text-decoration: none;
    border-radius: 8px;
    backdrop-filter: blur(10px);
    transition: background 0.3s;
  }

  .side-menu a:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  /* Ícone opcional (exemplo de imagem) */
  /* <img src="URL_DA_SUA_IMAGEM_AQUI" alt="Logo" class="logo"> */
</style>

<div class="menu-toggle" id="menuToggle">
  <span></span>
  <span></span>
  <span></span>
</div>

<div class="side-menu" id="sideMenu">
  <a href="home.html">TELA INICIAL</a>
  <a href="shorts.html">SHORTS</a>
  <a href="suporte.html">SUPORTE</a>
</div>

<script>
  const toggle = document.getElementById('menuToggle');
  const menu = document.getElementById('sideMenu');

  toggle.addEventListener('click', () => {
    toggle.classList.toggle('active');
    menu.classList.toggle('active');
  });
</script>






Garotas Mais Curtidas</header>

  <div class="search">
    <input type="text" id="busca" placeholder="Buscar por nome ou cidade..." oninput="filtrarGarotas()">
  </div>

  <div class="grid" id="listaCurtidas"></div>

  <div id="loader-bg"><div id="loader"></div></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBs2GrFPGib7Nz02F03Eeo5DTW-8OTJmFI",
      authDomain: "san7-2b351.firebaseapp.com",
      databaseURL: "https://san7-2b351-default-rtdb.firebaseio.com",
      projectId: "san7-2b351",
      storageBucket: "san7-2b351.appspot.com",
      messagingSenderId: "511547914036",
      appId: "1:511547914036:web:0595e39aef88258c649761"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const medalhas = [
      "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjfagjcaFJ2xBghPs8905ce5LPnPHvAv59eHf3T1-GhvjXie85CAsi1-kzXaPM5ma8J5-cxiH1cOqH5CfY3ni-V18t_x38goowy-x59J-mjcQg285ouBEzuM5U2Z9zdaDenpaoTmw-4gWeX8aF77WULR2O8cmgNLIJuxq39GM06Mmx6XPdInl1BB9VLo70/s190/9E369C89-5C76-4C88-99E4-8F6508835782.png",    // Coloque aqui a URL da imagem de ouro
      "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj5buUO06dvoT6eO2xk5V25cpv71q3i0OwxCpNT5Cte89zYdAE3itF34izR7v-2qQNcdOOy05xUDcnoQDY2tMviyd1KXcAHKvuzai0AWmsUPK0Oq2PgccOMJ6B7GsdC7qks7qiu7hNEoCuWBby6r2FNsShuaMnyTokz90EK_jZUGMwBGymqeHnGmM3Cu3M/s188/99756AB5-29DD-4F56-838D-8B4CF2F41444.png",   // Coloque aqui a URL da imagem de prata
      "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhtZGZCxq7BY5pNkgpAh6vPE49iv7fqDK3a8gSxZGVCqwEINd-vHA4vSsx-thKXV712IZeQ5r2zdD2wg3fhqjDbjggeUb0He1UHT48v-f-8SkUJ4TrB337VjC5lomYTCx2WKVgh54axpYi2Ehr4ED0AFUC4cTLU1yRsuPIsP2AVkIjxObi2TRaejxEwNmg/s189/7FBDC062-3B87-4056-8CD2-9E59FAD2EB04.png"   // Coloque aqui a URL da imagem de bronze
    ];
    const coracaoCheio = "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjngmAB8zLa0IZpPNhwOcnoJkVkbsrSpvSNX02PyMOUPCpdyNTDtnOhSszl8JziOJSzG_bHytMdAlYkC9jf0ktQv84ME53tPe4qbV_M822LoLHFLSH5q4LFlLE7p3-8Bvx3D93-Npa-TOuOlmiCWDvgVjmuGBVhpXWoAlOAdpWGQEB2Zm8xR2ynRAEbHC8/s373/019A347E-9D38-452A-95AA-E9E737990FD9.png"; // Ícone curtido
    const coracaoVazio = "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhFH8GssiZbpD0uM2C4vbL5Eq8cTYyNDwFfgnj5VMPSspHALL4v6pZS5I3XQ_J5TbMz5AEJ62mbnDjoDaE10qaFbxU-JmX20JlHUVONqNlBJIsN9vdGf7VKTpxIEfV4Qn5G0hRDh39nOqRTh2wJ97rAwXjdBLUdwWp0Vvus0PYFiEhYmqNfJ-Lu7A0AD2Q/s364/ADB8238C-9684-46EE-A7C4-600DC390207F.png"; // Ícone não curtido
    let garotas = [];

    function carregarCurtidas() {
      db.ref("usuarios").once("value").then(snapshot => {
        garotas = [];
        snapshot.forEach(child => {
          const user = child.val();
          if (user.nome && user.fotoPerfil) {
            garotas.push({
              id: child.key,
              nome: user.nome,
              cidade: user.cidade || '',
              foto: user.fotoPerfil,
              curtidas: user.curtidas || 0
            });
          }
        });

        garotas.sort((a, b) => b.curtidas - a.curtidas);
        mostrarGarotas(garotas);

        const loader = document.getElementById('loader-bg');
        loader.style.opacity = '0';
        setTimeout(() => loader.remove(), 500);
      });
    }

    function mostrarGarotas(lista) {
      const container = document.getElementById("listaCurtidas");
      container.innerHTML = "";

      if (lista.length === 0) {
        container.innerHTML = "<div class='sem-resultado'>Nenhuma garota encontrada.</div>";
        return;
      }

      lista.forEach((g, i) => {
        const card = document.createElement("div");
        card.className = "card";

        const medalha = i < 3 ? `<img src="${medalhas[i]}" class="medalha">` : '';
        const jaCurtiu = localStorage.getItem("curtiu_" + g.id);

        card.innerHTML = `
          ${medalha}
          <img src="${g.foto}" class="foto">
          <h4>${g.nome}</h4>
          <p>${g.cidade}</p>
          <button class="curtir-btn" onclick="event.stopPropagation(); curtir('${g.id}', this)">
            <img src="${jaCurtiu ? coracaoCheio : coracaoVazio}">
          </button>
          <div class="curtidas" id="curtidas_${g.id}">Curtidas: ${g.curtidas}</div>
        `;

        card.onclick = () => {
          sessionStorage.setItem("perfilId", g.id);
          location.href = "artigo.html";
        };

        container.appendChild(card);
      });
    }

    function curtir(id, btn) {
      if (localStorage.getItem("curtiu_" + id)) return;

      const el = document.getElementById("curtidas_" + id);
      const atual = parseInt(el.innerText.replace(/\D/g, ""));
      el.innerText = `Curtidas: ${atual + 1}`;
      btn.querySelector("img").src = coracaoCheio;
      localStorage.setItem("curtiu_" + id, true);
      db.ref("usuarios/" + id + "/curtidas").set(atual + 1);
    }

    function filtrarGarotas() {
      const termo = document.getElementById("busca").value.toLowerCase().trim();
      const resultado = garotas.filter(g =>
        g.nome.toLowerCase().includes(termo) || g.cidade.toLowerCase().includes(termo)
      );
      mostrarGarotas(resultado.sort((a, b) => b.curtidas - a.curtidas));
    }

    window.onload = carregarCurtidas;
  </script>
</body>
</html>
