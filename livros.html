<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Livros — Publicações</title>
<style>
  :root{
    --azul:#3a7bd5;
    --branco:#ffffff;
    --borda:#d0d0df;
    --texto:#1e1e2a;
    --sutil:#555;
    --blur: 14px;
    --radius:16px;
    --shadow: 0 10px 40px rgba(0,0,0,.1);
    --logo-width:100px;    /* largura da logomarca */
    --logo-height:50px;    /* altura reduzida para cabeçalho mais fino */
    --header-padding:6px;  /* padding reduzido para cabeçalho mais fino */
    --card-bg: #fff;       /* fundo das publicações */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    color:var(--texto);
    background: #f4f6fb url(https://upload.wikimedia.org/wikipedia/commons/a/ac/Jo%C3%A3o_C%C3%A2mara-RN.jpg) no-repeat center/cover;
    min-height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  header{
    position:sticky; top:0; z-index:100;
    width:100%;
    background:var(--azul);
    color:var(--branco);
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:var(--header-padding);
    backdrop-filter:saturate(1.2) blur(4px);
  }
  header img{
    width:var(--logo-width);
    height:var(--logo-height);
    object-fit:contain;
  }
  .buscar{
    position:sticky; top:calc(var(--logo-height) + var(--header-padding)); z-index:99;
    display:flex;
    width:100%;
    max-width:560px;
    margin:0 auto;
  }
  .buscar input{
    flex:1;
    border:1px solid #ccc;
    background:#fff;
    color:#222;
    font-size:15px;
    padding:12px 14px;
  }
  .buscar input:focus{outline:none}
  .btn-voltar{
    border:1px solid var(--borda);
    background:var(--branco);
    color:#0e1b34;
    padding:10px 16px;
    font-weight:600;
    text-decoration:none;
    box-shadow: var(--shadow);
  }
  main{
    width:100%;
    max-width:1100px;
    margin:20px auto 60px;
    padding:0 16px;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  hr{
    width:100%;
    border:0;
    border-top:1px solid #ccc;
    margin:20px 0;
  }
  .grid{
    width:100%;
    max-width:560px;
    display:flex;
    flex-direction:column;
    gap:20px;
  }
  .card{
    display:flex; flex-direction:column; gap:10px;
    background: var(--card-bg);
    border:1px solid #ddd;
    border-radius:14px;
    overflow:hidden;
    backdrop-filter: blur(8px);
    transition: transform .18s ease, box-shadow .18s ease;
    cursor:pointer;
  }
  .card:hover{ transform: translateY(-3px); box-shadow: 0 12px 30px rgba(0,0,0,.2); }
  .card figure{ margin:0; aspect-ratio: 16/9; overflow:hidden; background:#f0f2f9}
  .card img{ width:100%; height:100%; object-fit:cover; display:block; filter:saturate(1.05) contrast(1.02)}
  .card .cx{
    padding:12px 14px 14px;
    display:flex; flex-direction:column; gap:8px;
  }
  .tit{font-size:16px; font-weight:800; color:#111; line-height:1.25}
  .empty{
    padding:30px; text-align:center; color:#777; font-weight:600;
  }
</style>
</head>
<body>
  <header>
    <img id="logo" alt="Logomarca">
    <a class="btn-voltar" href="perfil.html" aria-label="Voltar para o perfil">Voltar</a>
  </header>

  <div class="buscar">
    <input id="busca" type="text" placeholder="Pesquisar..." autocomplete="off" />
  </div>

  <main>
    <div id="lista" class="grid"></div>
    <div id="vazio" class="empty" style="display:none">Nenhuma publicação encontrada.</div>
  </main>

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

  <script>
  const LOGO_URL = 'https://826d3d7dee.cbaul-cdnwnd.com/62fd26f239c381f07684529cff4b51b2/200000073-5e0965e098/5F906380-0F85-4C15-9F29-C762C3E0F1B1.webp?ph=826d3d7dee';
  const firebaseConfig = {
    apiKey: "AIzaSyCAlWxc7YxTMcTLCECUDuYfomO6QapreqY",
    authDomain: "login-you-see.firebaseapp.com",
    databaseURL: "https://login-you-see-default-rtdb.firebaseio.com",
    projectId: "login-you-see",
    storageBucket: "login-you-see.firebasestorage.app",
    messagingSenderId: "524877259374",
    appId: "1:524877259374:web:9ff66b67c9c5bf0bb07c7f",
    measurementId: "G-K7E00VXYHG"
  };

  document.getElementById('logo').src = LOGO_URL;
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const $lista = document.getElementById('lista');
  const $vazio = document.getElementById('vazio');
  const $busca = document.getElementById('busca');

  let itens = [];

  function shuffle(arr){
    for(let i = arr.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function templateCard(p){
    const imgSrc = (Math.random() < 0.5 ? p.image1 : p.image2) || p.image1 || p.image2 || 'https://picsum.photos/800/450';
    return `
      <article class="card" role="button" tabindex="0" onclick="ir('${p.id}')" onkeypress="if(event.key==='Enter'){ir('${p.id}')}" aria-label="Abrir publicação '${(p.title||'Sem título').replace(/"/g,'&quot;')}'">
        <figure><img loading="lazy" src="${imgSrc}" alt="${(p.title||'Imagem da publicação').replace(/"/g,'&quot;')}"></figure>
        <div class="cx">
          <div class="tit">${p.title || 'Sem título'}</div>
        </div>
      </article>
    `;
  }

  function render(lista){
    const q = $busca.value.trim().toLowerCase();
    let filtrados = lista.filter(p => (p.title||'').toLowerCase().includes(q) || (p.text||'').toLowerCase().includes(q));
    if(q.length === 0){ filtrados = shuffle([...filtrados]); }

    $lista.innerHTML = filtrados.map(templateCard).join('<hr>');
    $vazio.style.display = filtrados.length ? 'none' : 'block';
  }

  $busca.addEventListener('input', ()=>render(itens));

  function ir(id){ window.location.href = `artigo.html?id=${encodeURIComponent(id)}` }

  db.ref('posts').on('value', snap=>{
    const data = snap.val() || {};
    itens = Object.entries(data).map(([id, v])=>({ id, ...v }));
    render(itens);
  });
  </script>

</body>
</html>


<style>
  /* Fundo mais desfocado e escuro */
  #telaCarregamento {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(12px);
    background: rgba(0, 0, 0, 0.55);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.3s ease;
  }

  /* Caixa vertical estilo GOV */
  .carregandoBox {
    width: 160px;
    padding: 30px 20px;
    background: #fff;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 6px 25px rgba(0,0,0,0.25);
    font-family: "Arial", sans-serif;
  }

  /* Bolinha girando mais profissional e suave */
  .spinner {
    width: 60px;
    height: 60px;
    border: 5px solid #0072c6;
    border-top: 5px solid transparent;
    border-radius: 50%;
    animation: girar 2.5s linear infinite; /* mais lenta e suave */
    margin-bottom: 20px;
  }

  @keyframes girar {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Texto carregando */
  .carregandoBox span {
    font-size: 17px;
    color: #0072c6;
    font-weight: bold;
    text-align: center;
  }
</style>

<div id="telaCarregamento">
  <div class="carregandoBox">
    <div class="spinner"></div>
    <span>carregando...</span>
  </div>
</div>

<script>
  setTimeout(() => {
    const tela = document.getElementById('telaCarregamento');
    tela.style.opacity = '0';
    setTimeout(() => { tela.style.display = 'none'; }, 300);
  }, 3000);
</script>
