<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{
--green:#9CCC65;
--dark:#111;
--light:#fff;
--border:#ccc;
--bg-url:url('https://c2a6771173.cbaul-cdnwnd.com/4f0c8b93cda84ae8665e2b589652cf30/200000035-6240c6240e/700/24B77FF0-45F8-444B-9BF7-74B3B06B2E86.webp?ph=c2a6771173');
--logo-url:url('https://c2a6771173.cbaul-cdnwnd.com/4f0c8b93cda84ae8665e2b589652cf30/200000005-62d7c62d7e/700/9A9000A9-FCA5-4306-876F-28C2D3211763.webp');
}
body{
font-family:Inter,Arial,sans-serif;
margin:0;
padding:0;
background-image:var(--bg-url);
background-size:cover;
background-position:center;
background-attachment:fixed;
color:var(--dark);
}
header{
position:fixed;
top:0;
left:0;
right:0;
height:60px;
background:#fff;
border-bottom:2px solid #ccc;
display:flex;
align-items:center;
padding:0 15px;
z-index:10;
}
.logo{
width:140px;
height:40px;
background-image:var(--logo-url);
background-size:contain;
background-repeat:no-repeat;
background-position:left;
}
main{
padding:80px 15px 160px;
max-width:800px;
margin:auto;
}
.search-box{
width:100%;
padding:10px 12px;
border:1px solid var(--border);
font-size:16px;
outline:none;
margin-bottom:15px;
border-radius:0;
}
.group{
margin-bottom:15px;
border:1px solid var(--border);
background:rgba(255,255,255,0.9);
backdrop-filter:blur(5px);
box-shadow:0 0 10px rgba(0,0,0,0.1);
}
.group-header{
background:#f0f0f0;
padding:12px;
cursor:pointer;
font-weight:bold;
}
.exercise-list{
display:none;
padding:10px;
}
.exercise-item{
display:flex;
align-items:center;
justify-content:space-between;
border-bottom:1px solid #eee;
padding:8px 0;
flex-wrap:wrap;
}
.checkbox-modern{
width:24px;
height:24px;
border:2px solid #555;
display:inline-block;
cursor:pointer;
position:relative;
transition:.3s;
box-sizing:border-box;
}
.checkbox-modern.active{
background:var(--green);
border-color:var(--green);
}
.checkbox-modern::after{
content:'';
position:absolute;
top:50%;
left:50%;
width:8px;
height:8px;
background:#fff;
transform:translate(-50%,-50%) scale(0);
border-radius:2px;
transition:.2s;
}
.checkbox-modern.active::after{
transform:translate(-50%,-50%) scale(1);
}
input.reps,input.series,input.duration{
width:65px;
padding:5px;
border:1px solid #ccc;
font-size:14px;
text-align:center;
margin-left:5px;
border-radius:0;
outline:none;
}
.day-select,.intensity-select{
padding:5px;
font-size:14px;
border:1px solid #ccc;
margin-left:5px;
border-radius:0;
outline:none;
}
.obs{
width:100%;
margin-top:5px;
padding:5px;
border:1px solid #ccc;
font-size:14px;
outline:none;
border-radius:0;
}
footer{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
display:flex;
justify-content:center;
gap:10px;
padding:0 10px;
z-index:5;
}
.bottom-btn{
background:var(--green);
color:#fff;
border:none;
font-weight:bold;
padding:12px 25px;
cursor:pointer;
font-size:16px;
box-shadow:0 0 15px #0003;
width:170px;
text-align:center;
transition:.3s;
}
.bottom-btn:hover{background:#7cb342;}
.overlay{
position:fixed;
top:0;
left:0;
right:0;
bottom:0;
background:rgba(255,255,255,0.97);
display:none;
overflow:auto;
padding:80px 20px;
color:#000;
z-index:20;
}
.overlay h2{
text-align:center;
margin-bottom:15px;
}
.day-section{
border:1px solid #ddd;
margin-bottom:10px;
background:#fff;
box-shadow:0 0 10px #0001;
}
.day-title{
padding:10px;
font-weight:bold;
color:#fff;
}
.exercise-entry{
padding:10px;
border-top:1px solid #eee;
display:flex;
justify-content:space-between;
align-items:center;
}
.delete-btn{
background:#f44336;
color:#fff;
border:none;
padding:6px 10px;
font-weight:bold;
cursor:pointer;
transition:.3s;
}
.delete-btn:hover{background:#d32f2f;}
.close-btn{
position:fixed;
top:15px;
right:15px;
background:none;
color:var(--green);
font-size:28px;
border:none;
font-weight:bold;
cursor:pointer;
z-index:25;
}
#clearAll{
display:block;
margin:20px auto;
padding:10px 20px;
background:#f44336;
color:#fff;
border:none;
cursor:pointer;
font-weight:bold;
}
</style>
</head>
<body>
<header><div class="logo"></div>

<button onclick="window.location.href='index.html'" style="background-color:#8DC63F;color:#fff;border:none;width:70px;height:35px;position:absolute;top:50%;right:10px;transform:translateY(-50%);font-weight:bold;cursor:pointer;">Voltar</button>

</header>

<main>
<input type="text" id="search" class="search-box" placeholder="PESQUISAR...">
<div id="groups"></div>
</main>

<footer>
<button id="createBtn" class="bottom-btn">CRIAR TREINO</button>
<button id="viewBtn" class="bottom-btn">MEUS TREINOS</button>
</footer>

<div class="overlay" id="overlay">
  <button class="close-btn" onclick="closeOverlay()">×</button>
  <h2>MEUS TREINOS</h2>
  <button id="clearAll">EXCLUIR TUDO</button>
  <div id="trainings"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig={apiKey:"AIzaSyBPiznHCVkTAgx6m02bZB8b0FFaot9UkBU",authDomain:"prefeitura-de-joao-camara.firebaseapp.com",projectId:"prefeitura-de-joao-camara",storageBucket:"prefeitura-de-joao-camara.firebasestorage.app",messagingSenderId:"269299041577",appId:"1:269299041577:web:fd41b2939240e9eb476338",measurementId:"G-YT7NHR342J"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const na=localStorage.getItem('loggedUser')||'0000';
const cores=["#4caf50","#2196f3","#ff9800","#9c27b0","#f44336","#009688","#607d8b","#8bc34a","#3f51b5","#ff5722"];
let corIndex=0;

const groupsData={
"MEMBROS INFERIORES – GLÚTEOS / PERNAS / PANTURRILHAS":["ADUÇÃO-ABDUÇÃO","GLÚTEO VERTICAL","HACK","LEG 45","LEG 90","MESA FLEXORA","EXTENSORA","ELEVAÇÃO PÉLVICA","AGACHAMENTO LIVRE","AGACHAMENTO GUIADO","CROSS SMITH","PANTURRILHA EM PÉ","PANTURRILHA SENTADA"],
"MEMBROS SUPERIORES – COSTAS / DORSAIS":["PUXADA / REMADA BAIXA","PUXADA DORSAL","REMADA BAIXA DORSAL","REMADA NO APARELHO","REMADA CAVALINHO"],
"MEMBROS SUPERIORES – PEITO":["PECK DECK","SUPINO RETO","SUPINO INCL ARTICU","SUPINO RETO ARTICU","SUP INCLINADO MAQ","SUP DECLINADO"],
"MEMBROS SUPERIORES – BRAÇOS":["ROSCA SCOT MÁQUINA","ROSCA SCOT LIVRE"],
"MEMBROS SUPERIORES – OMBROS":["DESENV OMBRO LIVRE","BANCO SENTADO LIVRE"]
};
const intensidades=["NENHUMA","DROP-SET","SUPER-SÉRIE","TRI-SET","BI-SET","REST-PAUSE","PIRÂMIDE","GANGORRA","PRÉ-EXAUSTÃO"];
const groupsContainer=document.getElementById('groups');

Object.keys(groupsData).forEach(g=>{
  const group=document.createElement('div');
  group.className='group';
  const header=document.createElement('div');
  header.className='group-header';
  header.textContent=g;
  const list=document.createElement('div');
  list.className='exercise-list';
  groupsData[g].forEach(ex=>{
    const item=document.createElement('div');
    item.className='exercise-item';
    item.innerHTML=`<div class="checkbox-modern"></div><span>${ex}</span>
    <div>
      <input class="reps" type="number" placeholder="REP" min="1">
      <input class="series" type="number" placeholder="SÉR" min="1">
      <input class="duration" type="number" placeholder="MESES" min="1">
      <select class="day-select"><option>SEGUNDA</option><option>TERÇA</option><option>QUARTA</option><option>QUINTA</option><option>SEXTA</option><option>SÁBADO</option><option>DOMINGO</option></select>
      <select class="intensity-select">${intensidades.map(i=>`<option>${i}</option>`).join('')}</select>
      <textarea class="obs" placeholder="Observação (opcional)"></textarea>
    </div>`;
    list.appendChild(item);
  });
  header.onclick=()=>list.style.display=list.style.display==='block'?'none':'block';
  group.appendChild(header);
  group.appendChild(list);
  groupsContainer.appendChild(group);
});

document.addEventListener('click',e=>{if(e.target.classList.contains('checkbox-modern'))e.target.classList.toggle('active');});

document.getElementById('search').addEventListener('input',e=>{
  const val=e.target.value.toUpperCase();
  document.querySelectorAll('.exercise-item').forEach(i=>{
    i.style.display=i.innerText.includes(val)?'flex':'none';
  });
});

document.getElementById('createBtn').onclick=async()=>{
  const selected=[];
  document.querySelectorAll('.exercise-item').forEach(i=>{
    if(i.querySelector('.checkbox-modern').classList.contains('active')){
      selected.push({
        exercicio:i.querySelector('span').innerText,
        reps:i.querySelector('.reps').value,
        series:i.querySelector('.series').value,
        duracao:i.querySelector('.duration').value,
        dia:i.querySelector('.day-select').value,
        intensidade:i.querySelector('.intensity-select').value,
        observacao:i.querySelector('.obs').value || "",
        cor:cores[corIndex%cores.length]
      });
    }
  });
  if(!selected.length){alert('Nenhum exercício selecionado.');return;}
  const snap=await db.ref('treinos/'+na).get();
  let data=snap.exists()?snap.val():[];
  data=data.concat(selected);
  await db.ref('treinos/'+na).set(data);
  corIndex++;
  alert('Treino criado com sucesso!');
};

const overlay=document.getElementById('overlay');
document.getElementById('viewBtn').onclick=async()=>{
  overlay.style.display='block';
  const tDiv=document.getElementById('trainings');
  tDiv.innerHTML='';
  const snap=await db.ref('treinos/'+na).get();
  if(!snap.exists()){tDiv.innerHTML='<p style="text-align:center;">Nenhum treino criado.</p>';return;}
  const data=snap.val();
  const dias=['SEGUNDA','TERÇA','QUARTA','QUINTA','SEXTA','SÁBADO','DOMINGO'];
  dias.forEach(d=>{
    const items=data.filter(x=>x.dia===d);
    if(items.length>0){
      const sec=document.createElement('div');
      sec.className='day-section';
      sec.innerHTML=`<div class='day-title' style="background:${items[0].cor}">${d}</div>`;
      items.forEach((e,i)=>{
        const div=document.createElement('div');
        div.className='exercise-entry';
        div.innerHTML=`<div><strong>${e.exercicio}</strong>
        <br>SÉRIES: ${e.series} | REPETIÇÕES: ${e.reps} | DURAÇÃO: ${e.duracao} MÊS(ES)
        <br>INTENSIDADE: ${e.intensidade}
        ${e.observacao ? `<br><strong>OBS:</strong> ${e.observacao}` : ""}
        </div>
        <button class="delete-btn" onclick="deleteExercise('${d}',${i})">EXCLUIR</button>`;
        sec.appendChild(div);
      });
      tDiv.appendChild(sec);
    }
  });
};

document.getElementById('clearAll').onclick=async()=>{
  if(confirm('Deseja excluir todos os treinos?')){
    await db.ref('treinos/'+na).remove();
    document.getElementById('trainings').innerHTML='<p style="text-align:center;">Nenhum treino criado.</p>';
  }
};

function closeOverlay(){overlay.style.display='none';}

async function deleteExercise(dia,index){
  const snap=await db.ref('treinos/'+na).get();
  if(!snap.exists())return;
  let data=snap.val();
  let count=0;
  data=data.filter(x=>{
    if(x.dia===dia){
      if(count===index){count++;return false;}
      count++;
    }
    return true;
  });
  await db.ref('treinos/'+na).set(data);
  document.getElementById('viewBtn').click();
}
</script>

</body>
</html>
