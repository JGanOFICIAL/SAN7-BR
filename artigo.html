<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Biblioteca Virtual — Artigo</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{--header-h:64px;--max-w:1000px}
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;font-family:"Public Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  body{min-height:100vh;background:#fff;background-image:url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQM-JuQwVaQIYwKRl4Tr1Y82SzgpVltIcOR74Xauduq6QDql9cQFOzRK5e_&s=10");background-size:cover;background-position:center;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#0a1733}
  header{position:fixed;top:0;left:0;right:0;height:var(--header-h);z-index:1100;background:#fff;color:#333;display:flex;align-items:center;justify-content:space-between;padding:12px 18px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
  header .logo{display:flex;align-items:center;gap:12px}
  header .logo img{width:44px;height:44px;object-fit:contain;border-radius:8px}
  header .logo div{display:flex;flex-direction:column}
  header strong{font-size:15px}
  header small{font-size:13px;color:#444}
  .btn-back{background:#0b2b6b;color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;text-decoration:none;font-size:20px;border:none;border-radius:6px}
  main{margin:0 auto;max-width:var(--max-w);padding:20px;margin-top:calc(var(--header-h) + 10px);background:linear-gradient(180deg,#0b2b6b 0%,#041739 100%);color:#fff;min-height:calc(100vh - (var(--header-h) + 20px))}
  .hero{position:relative;margin:16px 0;border-radius:16px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.12)}
  .hero img{position:absolute;top:0;left:0;width:100%;height:100%;border:0;border-radius:16px;object-fit:cover}
  .conteudo{position:relative;padding:18px}
  .conteudo h1{margin:0 0 12px;font-size:24px;color:#fff}
  .conteudo .texto{font-size:16px;line-height:1.6;white-space:pre-wrap}
  .galeria{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;padding:16px 0}
  .galeria img{width:100%;height:200px;object-fit:cover;border-radius:12px}
  .loading{position:fixed;inset:0;background:#0a1733cc;backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:2000}
  .spinner{width:64px;height:64px;border:6px solid #ffffff33;border-top-color:#fff;border-radius:50%;animation:spin .9s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<header>
  <div class="logo">
    <img id="logoHeader" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcf-AtSCrU4sQ8PORTd7uRTwMwR1mzoxn5NMWhhAKbE2dsKY6Uiu17i5U7&s=10" alt="Logo">
    <div>
      <strong>Biblioteca Virtual</strong>
      <small>Câmara Municipal de João Câmara</small>
    </div>
  </div>
  <a href="livros.html" class="btn-back" aria-label="Voltar">←</a>
</header>

<main>
  <section class="hero">
    <img id="imgHero" alt="Imagem da publicação">
  </section>

  <article class="conteudo">
    <h1 id="titulo">Carregando…</h1>
    <div class="texto" id="texto"></div>
  </article>

  <section class="galeria" id="galeria" style="display:none"></section>
</main>

<div class="loading" id="loading"><div class="spinner"></div></div>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script>
  const $=s=>document.querySelector(s);
  const showLoad=(v=true)=>$("#loading").style.display=v?"flex":"none";

  const firebaseConfig={apiKey:"AIzaSyCAlWxc7YxTMcTLCECUDuYfomO6QapreqY",authDomain:"login-you-see.firebaseapp.com",databaseURL:"https://login-you-see-default-rtdb.firebaseio.com",projectId:"login-you-see",storageBucket:"login-you-see.firebasestorage.app",messagingSenderId:"524877259374",appId:"1:524877259374:web:9ff66b67c9c5bf0bb07c7f",measurementId:"G-K7E00VXYHG"};
  firebase.initializeApp(firebaseConfig);
  const db=firebase.database();

  function qs(k){const u=new URL(location.href);return u.searchParams.get(k);}
  const id=qs('id');
  const ref=db.ref('posts/'+id);

  showLoad(true);
  ref.on('value', snap=>{
    const v=snap.val();
    if(!v){$("#titulo").textContent="Publicação não encontrada";showLoad(false);return;}
    const imgs=[v.image1,v.image2].filter(Boolean);
    $("#imgHero").src=imgs.length?imgs[0]:"https://picsum.photos/1200/675";
    $("#titulo").textContent=v.title||"Sem título";
    $("#texto").textContent=v.text||"";
    const g=$("#galeria");
    if(imgs.length>1){
      g.style.display="grid";
      g.innerHTML=imgs.map(src=>`<img loading="lazy" src="${src}" alt="Imagem da publicação">`).join("");
    }else{g.style.display="none";}
    showLoad(false);
  },err=>{showLoad(false);console.error(err)});
</script>
</body>
</html>