<!-- =========================
login.html  ‚Ä¢ Prefeitura de Jo√£o C√¢mara
HTML + CSS + JS (Firebase Auth/Firestore/Storage)
Cores: branco predominante, cabe√ßalho azul-escuro, detalhes amarelos
Estilo "gov" simples, bot√µes e inputs quadrados, sem borda ao focar
========================= -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Prefeitura de Jo√£o C√¢mara ‚Ä¢ Acesso</title>
<link rel="icon" href="https://otimize-edoc.s3.amazonaws.com/edoc_1291/logo_joaocamara.png" />
<style>
  :root{
    --azul:#0B3B74; /* azul-escuro gov */
    --amarelo:#FFCC00;
    --cinza:#e9eef4;
    --texto:#111;
    --ok:#0c8f4d;
    --erro:#b00020;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:#fff;color:var(--texto);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif}
  header{
    background:var(--azul); color:#fff; display:flex; align-items:center; justify-content:space-between;
    padding:14px 16px; border-bottom:4px solid var(--amarelo); position:sticky; top:0; z-index:5;
  }
  header .brand{display:flex;align-items:center;gap:12px}
  header .brand .logo{
    width:44px;height:44px;background:#fff;border-radius:4px;display:flex;align-items:center;justify-content:center;
    overflow:hidden;
  }
  header .brand .logo img{width:100%;height:100%;object-fit:cover}
  header .brand .titulos{line-height:1.1}
  header .brand .titulos h1{margin:0;font-size:16px;font-weight:700}
  header .brand .titulos small{opacity:.9}
  main{max-width:520px;margin:22px auto;padding:0 16px}
  .card{
    background:#fff;border:1px solid var(--cinza); border-radius:8px; padding:22px; box-shadow:0 2px 10px rgba(0,0,0,.05)
  }
  .boas-vindas{
    margin:16px 0 22px;background:#fff;border:1px solid var(--cinza);
    box-shadow:0 8px 22px rgba(0,0,0,.06); border-radius:10px; overflow:hidden;
  }
  .boas-vindas .foto{
    width:100%;height:150px;background:#f6f7fb url('https://upload.wikimedia.org/wikipedia/commons/a/ac/Jo%C3%A3o_C%C3%A2mara-RN.jpg') center/cover no-repeat;
  }
  .boas-vindas .txt{padding:14px 16px}
  .boas-vindas h2{margin:0 0 6px;font-size:18px}
  label{display:block;font-size:13px;margin:14px 0 6px}
  input{
    width:100%;padding:14px;border:1px solid var(--cinza);border-radius:6px;background:#fff;
    outline:none; transition:background .2s;
  }
  input:focus{background:#fafafa;outline:none;box-shadow:none}
  .acoes{display:flex;gap:10px;margin-top:18px}
  button{
    border:1px solid var(--azul); background:var(--azul); color:#fff; padding:12px 14px;
    border-radius:6px; cursor:pointer; font-weight:600; width:100%; display:inline-flex; align-items:center; justify-content:center; gap:8px;
  }
  button.sec{background:#fff;color:var(--azul)}
  button:disabled{opacity:.6;cursor:not-allowed}
  .spinner{
    width:16px;height:16px;border:2px solid #fff;border-right-color:transparent;border-radius:50%;display:inline-block;animation:spin .8s linear infinite
  }
  .spinner.dark{border-color:var(--azul);border-right-color:transparent}
  @keyframes spin{to{transform:rotate(360deg)}}

  .divisor{margin:24px 0 12px;border-top:1px dashed #cfd6e3}
  .termos{font-size:12px;color:#333;line-height:1.6}
  .termos a{color:var(--azul);font-weight:600;text-decoration:none}

  /* Modal / Toast estilo gov */
  .overlay{
    position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:50;padding:16px
  }
  .overlay.mostrar{display:flex}
  .modal{
    background:#fff;border:1px solid var(--cinza);border-radius:10px;max-width:520px;width:100%;
    box-shadow:0 10px 30px rgba(0,0,0,.15); overflow:hidden;
  }
  .modal header{position:initial;border-bottom:1px solid var(--cinza);padding:12px 16px}
  .modal .conteudo{padding:16px}
  .modal .rodape{display:flex;gap:10px;padding:12px 16px;border-top:1px solid var(--cinza)}
  .btn-ghost{background:#fff;color:var(--azul);border:1px solid var(--azul)}
  .btn-amarelo{background:var(--amarelo);color:#111;border-color:var(--amarelo)}
  .msg{font-size:14px}
  .toast{
    position:fixed;left:50%;transform:translateX(-50%);bottom:20px;background:#111;color:#fff;padding:10px 14px;border-radius:8px;display:none;z-index:60
  }
  .toast.ok{background:var(--ok)}
  .toast.erro{background:var(--erro)}
  .links{display:flex;justify-content:space-between;gap:8px;margin-top:10px}
  a.lnk{font-size:13px;color:var(--azul);text-decoration:none;font-weight:600}
  /* VLIBRAS marca√ß√£o */
  .vlibra-holder{position:fixed;right:12px;bottom:12px;z-index:999}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">
      <!-- Local para LOGO DA PREFEITURA -->
      <img src="https://826d3d7dee.cbaul-cdnwnd.com/62fd26f239c381f07684529cff4b51b2/200000069-4a3354a336/700/A728F011-D3B0-4197-83F7-88EDFC2AF8A5.webp" alt="Prefeitura de Jo√£o C√¢mara">
    </div>
    <div class="titulos">
      <h1>Prefeitura de Jo√£o C√¢mara</h1>
      <small>Servi√ßos ao Cidad√£o</small>
    </div>
  </div>
</header>

<main>
  <section class="boas-vindas">
    <div class="foto" aria-hidden="true"></div>
    <div class="txt">
      <h2>Bem-vindo(a) ao portal</h2>
      <p>Acesse com seu e-mail e senha para utilizar os servi√ßos municipais.</p>
    </div>
  </section>

  <section class="card">
    <label for="email">E-mail</label>
    <input id="email" type="email" inputmode="email" autocomplete="email" placeholder="seunome@email.com" />

    <label for="senha">Senha</label>
    <input id="senha" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />

    <div class="acoes">
      <button id="btnEntrar"><span>Entrar</span></button>
      <button class="sec" id="btnCriar" onclick="location.href='cadastro.html'">Criar conta</button>
    </div>

    <div class="links">
      <a class="lnk" href="#" id="lnkCompartilhar">Indicar o app</a>
      <a class="lnk" href="#" id="lnkRecuperar">Esqueci minha senha</a>
    </div>

    <div class="divisor"></div>
    <div class="termos">
      <strong>Termos de uso e privacidade</strong>
      <p>Insira aqui os termos oficiais do munic√≠pio. <a href="#">Ler termos completos</a></p>
    </div>
  </section>
</main>

<!-- Modal inicial: indica√ß√£o do app -->
<div class="overlay" id="ovlIndicar">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="indTitulo">
    <header style="background:#f8fafc;color:#111">
      <h3 id="indTitulo" style="margin:0;font-size:16px">Indique o app</h3>
    </header>
    <div class="conteudo">
      <p class="msg">Indique parentes e amigos camarenses para baixar o app.</p>
<hr>
<p class="msg">üìÑDesenvolvido por @eujpfelix - Vers√£o para testes. Algumas fun√ß√µes n√£o est√£o disponiveis, pois se trata de uma vers√£o beta.</p>
    </div>
    <div class="rodape">
      <button class="btn-ghost" id="btnFecharShare">Fechar</button>
      <button class="btn-amarelo" id="btnShare"><span id="txtShare">Compartilhar</span></button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCAlWxc7YxTMcTLCECUDuYfomO6QapreqY",
  authDomain: "login-you-see.firebaseapp.com",
  databaseURL: "https://login-you-see-default-rtdb.firebaseio.com",
  projectId: "login-you-see",
  storageBucket: "login-you-see.appspot.com",
  messagingSenderId: "524877259374",
  appId: "1:524877259374:web:9ff66b67c9c5bf0bb07c7f",
  measurementId: "G-K7E00VXYHG"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

const btnEntrar = document.getElementById('btnEntrar');
const toast = (msg,t="ok")=>{
  const el = document.getElementById('toast');
  el.textContent = msg; el.className = 'toast '+t; el.style.display='block';
  setTimeout(()=>el.style.display='none', 2800);
}
const setBusy=(btn,busy)=>{
  if(busy){btn.dataset.label=btn.innerHTML; btn.innerHTML='<span class="spinner"></span><span> Carregando</span>'; btn.disabled=true;}
  else{btn.innerHTML=btn.dataset.label||'Entrar'; btn.disabled=false;}
}

document.getElementById('lnkRecuperar').onclick=async(e)=>{
  e.preventDefault();
  const email = prompt('Digite seu e-mail para recuperar a senha:');
  if(!email) return;
  try{
    await auth.sendPasswordResetEmail(email);
    toast('E-mail de recupera√ß√£o enviado.','ok');
  }catch(err){ toast('N√£o foi poss√≠vel enviar. Verifique o e-mail.','erro'); }
};

btnEntrar.onclick = async ()=>{
  const email = document.getElementById('email').value.trim();
  const senha = document.getElementById('senha').value;
  if(!email || !senha){ toast('Preencha e-mail e senha.','erro'); return;}
  setBusy(btnEntrar,true);
  try{
    await auth.signInWithEmailAndPassword(email,senha);
    toast('Acesso autorizado.','ok');
    location.href='info.html';
  }catch(err){
    toast('Falha no acesso. Verifique os dados.','erro');
  }finally{ setBusy(btnEntrar,false); }
};

// Modal Indica√ß√£o
const ovl = document.getElementById('ovlIndicar');
const btnShare = document.getElementById('btnShare');
const btnFecharShare = document.getElementById('btnFecharShare');
window.addEventListener('load', ()=>{ ovl.classList.add('mostrar'); });
btnFecharShare.onclick=()=>ovl.classList.remove('mostrar');
btnShare.onclick=async ()=>{
  try{
    if(navigator.share){
      await navigator.share({
        title:'Prefeitura de Jo√£o C√¢mara',
        text:'Baixe o app da Prefeitura de Jo√£o C√¢mara para acessar servi√ßos do cidad√£o.',
        url:location.href
      });
      ovl.classList.remove('mostrar');
      toast('Obrigado por compartilhar!','ok');
    }else{
      await navigator.clipboard.writeText('Baixe o app da Prefeitura de Jo√£o C√¢mara: '+location.href);
      toast('Link copiado para a √°rea de transfer√™ncia.','ok');
    }
  }catch(e){ /* cancelado */ }
};

// Se j√° estiver logado, vai pro perfil
auth.onAuthStateChanged(u=>{ if(u) location.href='info.html'; });
</script>

<!-- VLIBRAS -->
<div vw class="enabled"></div>
<script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
<script> new window.VLibras.Widget('https://vlibras.gov.br/app'); </script>
</body>
</html>
