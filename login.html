<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Login - Academia</title>
<style>
:root{
  --bg:#fff;
  --dark:#111;
  --light:#f5f5f5;
  --green:#32CD32;
  --green-hover:#28a428;
  --border:#e1e1e1;
}
*{box-sizing:border-box;margin:0;padding:0;font-family: 'Inter', system-ui, -apple-system, sans-serif}

body{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding: 20px;
  position:relative;
  color:var(--dark);
  background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url("https://c2a6771173.cbaul-cdnwnd.com/4f0c8b93cda84ae8665e2b589652cf30/200000013-2fae32fae5/700/3C689C7F-7879-42BA-9736-D2E498D707CE.webp?ph=c2a6771173") no-repeat center center/cover;
  background-attachment: fixed;
}

/* Cabeçalho Branco Sólido e Imóvel */
header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:64px;
  background:#ffffff; /* Branco Sólido */
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  border-bottom:1px solid #eee;
  z-index:100;
}

.logo-canto-esquerdo{height:38px;width:auto}

/* Botão Suporte Quadrado e Compacto */
.btn-suporte-original {
  background-color: #8DC63F;
  color: #fff;
  border: none;
  width: 70px; /* Largura fixa para manter o formato */
  height: 35px;
  font-weight: bold;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
}

main {
  width: 100%;
  max-width: 380px;
  padding: 40px 30px;
  background: #ffffff;
  border-radius: 0px; /* Mantendo Reto */
  box-shadow: 0 15px 35px rgba(0,0,0,0.2);
  z-index: 5;
  margin-top: 60px;
}

h2 {
  font-size: 22px;
  font-weight: 800;
  margin-bottom: 8px;
  text-align: center;
  color: #000;
}

.subtitle {
  text-align: center;
  color: #666;
  font-size: 14px;
  margin-bottom: 30px;
}

label {
  display: block;
  font-size: 11px;
  font-weight: 700;
  color: #888;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

input[type="text"] {
  width: 100%;
  padding: 12px 0;
  border: none;
  border-bottom: 2px solid #eee;
  font-size: 18px;
  color: #000;
  background: transparent;
  outline: none;
  transition: border-color 0.3s;
}

input[type="text"]:focus {
  border-bottom-color: var(--green);
}

/* Botão de Login - Quadrado e Reto */
.btn {
  margin-top: 30px;
  width: 100%;
  padding: 16px;
  border-radius: 0px; 
  border: none;
  background: #e6e6e6;
  color: #999;
  font-weight: 700;
  font-size: 15px;
  text-transform: uppercase;
  cursor: pointer;
  transition: .3s;
}

.btn.active {
  background: var(--green);
  color: #fff;
}

.remember-access {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 20px;
  cursor: pointer;
}

.remember-toggle {
  width: 20px;
  height: 20px;
  border: 2px solid #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
}

.remember-toggle.active {
  background: var(--green);
  border-color: var(--green);
}

.remember-toggle.active::after {
  content: '✓';
  color: #fff;
  font-size: 12px;
}

.remember-label { font-size: 14px; color: #444; }

.info {
  margin-top: 25px;
  font-size: 11px;
  color: #999;
  text-align: center;
  line-height: 1.5;
}

.link-saiba-mais {
  display: block;
  text-align: center;
  font-size: 15px;
  color: #333;
  text-decoration: none;
  font-weight: 600;
  margin-top: 20px;
}

.footer-img-container {
  margin-top: 30px;
  display: flex;
  justify-content: center;
}
</style>
</head>
<body>

<header>
  <img src="https://c2a6771173.cbaul-cdnwnd.com/4f0c8b93cda84ae8665e2b589652cf30/200000005-62d7c62d7e/700/9A9000A9-FCA5-4306-876F-28C2D3211763.webp" class="logo-canto-esquerdo">
  <button class="btn-suporte-original" onclick="window.location.href='chat.html'">Suporte</button>
</header>

<main>
  <div class="container">
    <h2>Digite seu NA</h2>
    <p class="subtitle">Acesse o painel da academia</p>
    
    <label for="serial">Número de Série (5 dígitos)</label>
    <input id="serial" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="Ex: 12345" maxlength="5" autocomplete="off"/>

    <div class="remember-access" id="rememberAccess">
      <div class="remember-toggle" id="rememberToggle"></div>
      <span class="remember-label">Lembrar acesso</span>
    </div>

    <button id="loginBtn" class="btn">Continuar</button>
    
    <a href="na.html" class="link-saiba-mais">Saiba mais sobre o NA</a>
    
    <div class="info">
      Essa página possui certificado SLL, ambiente seguro.
    </div>
  </div>
</main>

<div class="footer-img-container">
  <img src="https://c2a6771173.cbaul-cdnwnd.com/4f0c8b93cda84ae8665e2b589652cf30/200000031-a3714a3716/700/86575BA3-ED3D-4EE7-A61F-F460FF284429.webp" style="height:25px; width:auto;">
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig={apiKey:"AIzaSyBPiznHCVkTAgx6m02bZB8b0FFaot9UkBU",authDomain:"prefeitura-de-joao-camara.firebaseapp.com",projectId:"prefeitura-de-joao-camara",storageBucket:"prefeitura-de-joao-camara.firebasestorage.app",messagingSenderId:"269299041577",appId:"1:269299041577:web:fd41b2939240e9eb476338",measurementId:"G-YT7NHR342J"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

const serialEl=document.getElementById('serial');
const loginBtn=document.getElementById('loginBtn');
const rememberToggle=document.getElementById('rememberToggle');
const rememberAccess=document.getElementById('rememberAccess');

if(localStorage.getItem('rememberNA')){
  serialEl.value=localStorage.getItem('rememberNA');
  if(serialEl.value.length === 5) loginBtn.classList.add('active');
  rememberToggle.classList.add('active');
}

rememberAccess.addEventListener('click',()=>{
  rememberToggle.classList.toggle('active');
});

serialEl.addEventListener('input',e=>{
  const v=e.target.value.replace(/\D/g,'').slice(0,5);
  e.target.value=v;
  if(v.length === 5){loginBtn.classList.add('active');}
  else{loginBtn.classList.remove('active');}
});

loginBtn.addEventListener('click',async()=>{
  const raw=serialEl.value.replace(/\D/g,'');
  if(raw.length!==5){alert('Número de Série inválido.');serialEl.focus();return;}
  
  const originalText = loginBtn.innerText;
  loginBtn.innerText = "Aguarde...";
  
  try{
    const snapshot=await db.ref('users/'+raw).get();
    if(!snapshot.exists()){
        alert('Usuário não encontrado.');
        loginBtn.innerText = originalText;
        return;
    }
    const user=snapshot.val();
    const today=new Date().toISOString().slice(0,10);
    
    if(!user.active){alert('Plano inativo.'); loginBtn.innerText = originalText; return;}
    if(user.endDate&&user.endDate<today){alert('Plano expirado.'); loginBtn.innerText = originalText; return;}
    
    localStorage.setItem('loggedUser',raw);
    if(rememberToggle.classList.contains('active')){
      localStorage.setItem('rememberNA',raw);
    }else{
      localStorage.removeItem('rememberNA');
    }
    window.location.href='dashboard.html';
  }catch(err){
    alert('Erro de conexão.');
    loginBtn.innerText = originalText;
  }
});
</script>
</body>
</html>


<div id="san7-container"></div> ‹script src="./san7doc. cookes.js"> </script>