<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Prefeitura de João Câmara — Acesso</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body,html{height:100%;width:100%;font-family:"Public Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  body{
    display:flex;justify-content:center;align-items:center;
    background:#fff;
    background-image:url("https://otimize-edoc.s3.amazonaws.com/edoc_1291/logo_joaocamara.png");
    background-size:cover;background-position:center;
  }
  .login-container{
    background:linear-gradient(180deg,#0b2b6b 0%,#041739 100%);
    color:#fff;width:100%;max-width:420px;
    padding:40px 28px;min-height:100vh;
    display:flex;flex-direction:column;justify-content:center;
  }
  .logo{display:flex;align-items:center;gap:10px;margin-bottom:40px}
  .logo img{width:40px;height:40px;object-fit:contain;border-radius:6px}
  .logo div{display:flex;flex-direction:column}
  h2{font-size:22px;font-weight:700;margin-bottom:6px}
  p{font-size:15px;margin-bottom:28px}
  form{display:flex;flex-direction:column;gap:24px}
  input{
    width:100%;padding:14px 12px;font-size:18px;color:#fff;
    border:none;border-bottom:1px solid rgba(255,255,255,.7);
    background:transparent;outline:none;
  }
  input::placeholder{color:rgba(255,255,255,.6)}
  .btn{
    width:100%;padding:16px;border:none;border-radius:30px;
    font-weight:700;font-size:16px;cursor:pointer;transition:.2s;
  }
  .btn-prim{background:#bfbfbf;color:#333}
  .btn-prim:enabled{background:#fff;color:#0b2b6b}
  .btn-sec{background:#0b2b6b;color:#fff}
  .rodape{margin-top:40px;text-align:center;font-size:14px;color:rgba(255,255,255,.85)}
  .spinner{width:18px;height:18px;border:3px solid rgba(255,255,255,.4);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  @media(max-width:500px){
    .login-container{padding:30px 20px}
    h2{font-size:20px}
  }

  .salvar-wrap{display:flex;align-items:center;gap:10px;cursor:pointer;user-select:none;margin-top:4px;margin-bottom:6px}
  .salvar-wrap input[type="checkbox"]{display:none}
  .salvar-box{
    width:44px;height:28px;border-radius:999px;background:rgba(255,255,255,0.12);position:relative;flex:0 0 auto;
    display:flex;align-items:center;padding:4px;transition:all .22s;
  }
  .salvar-thumb{
    width:20px;height:20px;border-radius:50%;background:#fff;transform:translateX(0);transition:transform .22s;
    box-shadow:0 4px 10px rgba(0,0,0,.18);
  }
  .salvar-wrap input[type="checkbox"]:checked + .salvar-box{background:#fff}
  .salvar-wrap input[type="checkbox"]:checked + .salvar-box .salvar-thumb{transform:translateX(16px);background:#0b2b6b}
  .salvar-label{font-size:14px;color:rgba(255,255,255,.9)}
</style>
</head>
<body>
  <div class="login-container">
    <div class="logo">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcf-AtSCrU4sQ8PORTd7uRTwMwR1mzoxn5NMWhhAKbE2dsKY6Uiu17i5U7&s=10" alt="Logo">
      <div>
        <strong>Câmara Municipal</strong>
        <small>Prefeitura de João Câmara/RN</small>
      </div>
    </div>

    <h2>Para começar, informe seu e-mail</h2>
    <p>Somente endereços válidos</p>

    <form id="formLogin">
      <input id="email" type="email" autocomplete="email" required placeholder="Seu e-mail" />
      <input id="senha" type="password" autocomplete="current-password" required placeholder="Sua senha" />

      <label class="salvar-wrap" title="Salvar apenas o e-mail para facilitar futuros acessos">
        <input type="checkbox" id="salvarLogin" />
        <span class="salvar-box" aria-hidden="true"><span class="salvar-thumb"></span></span>
        <span class="salvar-label">Salvar acesso neste dispositivo</span>
      </label>

      <button id="btnEntrar" class="btn btn-prim" type="submit" disabled>
        <span>Continuar</span>
      </button>
      <button type="button" class="btn btn-sec" onclick="location.href='cadastro.html'">
        Criar minha conta
      </button>
      <div id="loginMsg" class="rodape"></div>
    </form>

    <center>
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhfgqPcqGWPGT6tEeYvYZTuetCal_r2ClEqYyFMm_jfkeQCwdDE9wchsrtolgCIRSZQTYLuvRmwnv5V_J-K3y10CmY6CNmpVZ-JaMLprrxOsX26ZQuiNqOTXHsb-9mvI5a8mvVfV2BNTnYaesPzOM0aN5Nvf8aIRHbnvs-aH1EgnyauTN6efoqgrpM2xHQ/s593/8A092B0F-4211-4DFA-9238-7E1F039C323E.png" width="350">
    </center>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="script.js"></script>
  <script>
    const form = document.getElementById('formLogin');
    const btn = document.getElementById('btnEntrar');
    const msg = document.getElementById('loginMsg');
    const emailInput = document.getElementById('email');
    const senhaInput = document.getElementById('senha');
    const salvarCheckbox = document.getElementById('salvarLogin');
    const LS_KEY = 'emailSalvo_jcamararn';

    function toggleButton(){
      btn.disabled = !(emailInput.value.trim() && senhaInput.value);
    }
    emailInput.addEventListener('input', toggleButton);
    senhaInput.addEventListener('input', toggleButton);

    function setLoading(is){
      btn.disabled = is;
      btn.innerHTML = is ? '<div class="spinner"></div><span style="margin-left:8px">Entrando…</span>' : '<span>Continuar</span>';
    }

    window.addEventListener('DOMContentLoaded', ()=>{
      try{
        const saved = localStorage.getItem(LS_KEY);
        if(saved){
          emailInput.value = saved;
          salvarCheckbox.checked = true;
          senhaInput.value = '';
          toggleButton();
        }
      }catch(e){console.warn(e);}
    });

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      setLoading(true); msg.textContent = '';
      const email = emailInput.value.trim();
      const senha = senhaInput.value;
      try{
        await loginComEmail(email, senha);
        if(salvarCheckbox.checked){
          localStorage.setItem(LS_KEY, email);
        }else{
          localStorage.removeItem(LS_KEY);
        }
        location.href = 'perfil.html';
      }catch(err){
        msg.textContent = typeof traduzErroAuth === 'function' ? traduzErroAuth(err) : 'Erro ao entrar';
      }finally{ setLoading(false); }
    });
  </script>
</body>
</html>


<div id="splash" style="
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #ffffff;
    z-index: 9999;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 1;
    overflow: hidden;
">
    <div style="display:flex; flex-direction:column; align-items:center; justify-content:center;">
        <img id="logo" src='https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhgCAonk_09f-i1EWBq2W3oMbASuK-Gpiu574uiuVMgmbNzUL71aMPjalveZxu9o3VzuLkJnuxTiwN6pjJ9zXLLgVapMKDWu7PZfhS7ri_cPytA5mstEgppriwDKMNX52Ou_UAcjoYcY5GxTnqdzmW_h75XDcIF3MVxk2B3SKId9dh6NO_3Qvd4-2hbTJs/s300/57E721E0-CBE2-49F3-853D-B1D6FD29E680.png' alt='Logo' style="
            width: 180px;
            height: auto;
            z-index: 10;
            margin-bottom: 20px;
        ">
        <div id="spinner" style="
            width: 25px;
            height: 25px;
            border: 4px solid #1a2a44;
            border-top: 4px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 10;
        "></div>
    </div>
    <div style="
        position: absolute;
        bottom: 20px;
        width: 100%;
        text-align: center;
        color:#555555;
        font-size:14px;
        font-family:Arial, sans-serif;
        z-index:10;
    ">Desenvolvido por JpFelix Tecnologia</div>
</div>

<style>
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>

<script>
setTimeout(() => {
    const splash = document.getElementById('splash');
    if (splash) splash.style.transition = 'opacity 0.5s ease';
    splash.style.opacity = '0';
    setTimeout(() => { if (splash) splash.remove(); }, 500);
}, 1500);
</script>