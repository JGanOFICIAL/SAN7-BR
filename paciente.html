<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agendamento de Consultas — Paciente</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rawline:wght@400;600;700&family=Public+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --gov-azul:#1351B4; --gov-amarelo:#FFCD00; --gov-branco:#fff;
    --gov-verde:#168821; --gov-vermelho:#d93025; --cinza:#f6f7f9;
    --sombra:0 10px 30px rgba(0,0,0,.08);
  }
  body{margin:0;background:var(--cinza);font-family:"Public Sans","Rawline",sans-serif}
  header{position:sticky;top:0;background:var(--gov-azul);color:#fff;
    padding:14px 18px;display:flex;align-items:center;justify-content:space-between;
    box-shadow:var(--sombra);z-index:10}
  .logo{width:44px;height:44px;background:#fff;border-radius:6px;overflow:hidden}
  main{max-width:1040px;margin:24px auto;padding:0 16px}
  h2{margin-top:0}
  .lista{display:grid;gap:12px}
  .item{background:#fff;border-radius:12px;box-shadow:var(--sombra);
    padding:16px;cursor:pointer;transition:.2s}
  .item:hover{transform:translateY(-2px)}
  .dias{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px;margin-top:12px}
  .dia{padding:10px;border-radius:8px;text-align:center;cursor:pointer;border:1px solid #ccc;background:#fff}
  .dia.disp{border-color:var(--gov-verde);color:var(--gov-verde)}
  .dia.bloq{background:#f9d6d6;color:var(--gov-vermelho);cursor:not-allowed}
  .servicos{margin-top:16px}
  select,input,button{width:100%;padding:12px;border-radius:10px;border:1px solid #dfe3eb;font-size:15px}
  button{cursor:pointer;font-weight:700}
  .btn-prim{background:var(--gov-azul);color:#fff;border:none}
  .btn-sec{background:#eaf1ff;color:#0b2b6b;border:none}
  /* Overlay modal */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.42);display:none;
    align-items:center;justify-content:center;padding:12px;z-index:50}
  .modal{background:#fff;border-radius:14px;box-shadow:var(--sombra);
    width:min(600px,100%);max-height:90vh;overflow:auto;padding:18px}
  .mhead{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  .mclose{border:none;background:#f1f3f5;border-radius:10px;padding:8px 12px;cursor:pointer}
  .comprovante{background:#f6f7f9;padding:14px;border-radius:10px;font-size:15px}
</style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpN6mG9JrV3AvmACLq0uOQb0OcGFLu4WW8sOckbZpA8ow2biqC-IxosxA&s=10"
           alt="Logomarca" style="max-width:100%;max-height:100%;object-fit:contain">
    </div>
    <div>
      <small>Prefeitura de João Câmara/RN</small><br>
      <strong>Agendamento de Consultas</strong>
    </div>
  </div>
  <button id="btnExtrato" class="btn-sec">Extrato</button>
</header>

<main>
  <h2>Escolha sua UBS</h2>
  <div id="listaUbs" class="lista"></div>

  <div id="areaDias" style="margin-top:20px;display:none">
    <h2>Escolha o dia</h2>
    <div id="dias" class="dias"></div>
  </div>

  <div id="areaServicos" class="servicos" style="display:none">
    <h2>Serviço e horário</h2>
    <label>Serviço</label>
    <select id="selectServico"></select>
    <label>Turno</label>
    <select id="selectTurno">
      <option value="manha">Manhã</option>
      <option value="tarde">Tarde</option>
    </select>
    <div style="margin:10px 0"><strong>Fichas disponíveis:</strong> <span id="qtdFichas">-</span></div>
    <button id="btnSolicitar" class="btn-prim">Solicitar</button>
  </div>
</main>

<!-- Modal comprovante -->
<div id="overlayComp" class="overlay">
  <div class="modal">
    <div class="mhead">
      <h3>Comprovante</h3>
      <button class="mclose" onclick="document.getElementById('overlayComp').style.display='none'">✕</button>
    </div>
    <div id="comprovante" class="comprovante"></div>
  </div>
</div>

<!-- Modal extrato -->
<div id="overlayExtrato" class="overlay">
  <div class="modal">
    <div class="mhead">
      <h3>Extrato de marcações</h3>
      <button class="mclose" onclick="document.getElementById('overlayExtrato').style.display='none'">✕</button>
    </div>
    <div id="listaExtrato"></div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="script.js"></script>
<script src="paciente.js"></script>
</body>
</html>
